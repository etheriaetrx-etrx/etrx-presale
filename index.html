<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>$ETRX â€¢ Etheria Presale</title>
  <meta name="description" content="$ETRX â€” the official utility token of Etheria. Presale on Ethereum."/>

  <!-- Prevent caching so countdown/phase is always current -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
  <meta http-equiv="Pragma" content="no-cache"/>
  <meta http-equiv="Expires" content="0"/>

  <!-- SEO / Social -->
  <link rel="canonical" href="https://etheriaetrx-etrx.github.io/etrx-presale/">
  <meta property="og:title" content="$ETRX â€¢ Etheria Presale">
  <meta property="og:description" content="The official utility token of Etheria. Presale runs Oct 31 â†’ Nov 7, 2025 (UTC).">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://etheriaetrx-etrx.github.io/etrx-presale/">
  <meta property="og:image" content="https://etheriaetrx-etrx.github.io/etrx-presale/assets/Background.png?v=6">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@enteretheria">
  <meta name="robots" content="index,follow,max-image-preview:large">

  <!-- Event structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Event",
    "name":"$ETRX â€¢ Etheria Presale",
    "startDate":"2025-10-31T00:00:00Z",
    "endDate":"2025-11-07T00:00:00Z",
    "eventAttendanceMode":"https://schema.org/OnlineEventAttendanceMode",
    "eventStatus":"https://schema.org/EventScheduled",
    "image":["https://etheriaetrx-etrx.github.io/etrx-presale/assets/Background.png?v=6"],
    "description":"The official utility token of Etheria. Presale on Ethereum; TGE/listing follows after the presale window.",
    "organizer":{"@type":"Organization","name":"Etheria","url":"https://etheriaetrx-etrx.github.io/etrx-presale/"},
    "location":{"@type":"VirtualLocation","url":"https://etheriaetrx-etrx.github.io/etrx-presale/"}
  }
  </script>

  <!-- FAQ structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Is this a presale or the live coin?","acceptedAnswer":{"@type":"Answer","text":"This page is for the presale window (Oct 31 â†’ Nov 7, 2025 UTC). After presale, we proceed to TGE (token generation & distribution) and initial listings/liquidity."}},
      {"@type":"Question","name":"How will buying work?","acceptedAnswer":{"@type":"Answer","text":"When live, youâ€™ll connect MetaMask and participate directly in the presale contract. Post-TGE, $ETRX will be distributed and appear in your wallet."}}
    ]
  }
  </script>

  <!-- Basic CSP (best-effort for GH Pages) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https://etheriaetrx-etrx.github.io;
                 img-src 'self' data: https:;
                 script-src 'self' https://cdn.tailwindcss.com 'unsafe-inline';
                 style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
                 font-src https://fonts.gstatic.com;
                 connect-src 'self' https://formspree.io;
                 worker-src 'self';
                 object-src 'none';
                 base-uri 'self';
                 frame-ancestors 'none'">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b0f18">

  <!-- Fonts & Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com?v=3"></script>

  <!-- Preload + responsive hero -->
  <link rel="preload" as="image" href="assets/Background.png?v=6" imagesrcset="
    assets/Background-640.jpg 640w,
    assets/Background-960.jpg 960w,
    assets/Background-1280.jpg 1280w,
    assets/Background.png?v=6 1600w" imagesizes="(max-width: 768px) 100vw, 50vw">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/logo.png">

  <style>
    :root{
      color-scheme: dark;
      --ether-blue:#3b82f6;   --ether-cyan:#22d3ee;
      --ether-orange:#f97316; --ether-bg:#090e17;
      --panel:rgba(255,255,255,.06); --ring:rgba(255,255,255,.12);
      --text-muted:rgba(255,255,255,.78); --text-dim:rgba(255,255,255,.62);
    }
    *{ box-sizing:border-box }
    body{ margin:0; background:var(--ether-bg); color:#fff; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; overflow-x:hidden; }
    .etherian-bg{
      background:
        radial-gradient(60% 40% at 50% 0%, color-mix(in oklab, var(--ether-cyan) 24%, transparent), transparent 60%),
        radial-gradient(45% 35% at 82% 12%, color-mix(in oklab, var(--ether-orange) 20%, transparent), transparent 65%),
        radial-gradient(35% 25% at 18% 12%, color-mix(in oklab, var(--ether-blue) 18%, transparent), transparent 65%),
        var(--ether-bg);
    }
    .tabular{ font-variant-numeric: tabular-nums }
    .card{ backdrop-filter: blur(8px) }
    .panel{ background:var(--panel); border:1px solid var(--ring) }
    .ring-panel{ box-shadow:0 0 0 1px var(--ring) inset }
    .btn-primary{ background: linear-gradient(90deg, var(--ether-orange), var(--ether-blue)); color:#0b0f18; font-weight:700; }
    .btn-primary:hover{ filter:saturate(1.05) brightness(1.05) }
    :focus-visible { outline: 2px solid var(--ether-cyan); outline-offset: 2px; }
    #orbCanvas{ position:fixed; inset:0; z-index:0; pointer-events:none; filter:drop-shadow(0 0 24px rgba(34,211,238,.08)); }
    .z-10{ position:relative; z-index:10 }
    #launchBar{ position:sticky; bottom:0; z-index:50; backdrop-filter:blur(8px) }
    @media (prefers-reduced-motion: reduce){
      #orbCanvas{ display:none }
      *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important }
    }
  </style>
</head>

<body class="etherian-bg">
  <!-- Skip link -->
  <a href="#about" class="sr-only focus:not-sr-only fixed left-3 top-3 z-50 rounded-lg bg-white/10 px-3 py-2 ring-1 ring-white/20">Skip to content</a>

  <!-- Floating orbs / starfield -->
  <canvas id="orbCanvas" aria-hidden="true"></canvas>

  <!-- Nav -->
  <header class="z-10 mx-auto flex max-w-6xl items-center justify-between px-6 py-5">
    <div class="flex items-center gap-3">
      <img src="assets/logo.png" alt="Etheria Logo" class="h-10 w-10 rounded-xl ring-1 ring-white/10 object-contain bg-white/5" />
      <div class="text-sm sm:text-base tracking-wide opacity-90">Etheria</div>
    </div>
    <nav class="hidden gap-6 text-sm opacity-80 md:flex" aria-label="Primary">
      <a class="hover:opacity-100" href="#about">About</a>
      <a class="hover:opacity-100" href="#token">Tokenomics</a>
      <a class="hover:opacity-100" href="#road">Road</a>
      <a class="hover:opacity-100" href="#faq">FAQ</a>
    </nav>
    <a href="#notify" class="rounded-2xl border border-white/15 bg-white/5 px-4 py-2 text-sm hover:bg-white/10">Get Notified</a>
  </header>

  <!-- Hero -->
  <section class="z-10 mx-auto grid max-w-6xl grid-cols-1 items-stretch gap-10 px-6 pb-16 pt-6 md:grid-cols-2 md:pt-10">
    <div class="order-2 md:order-1">
      <h1 class="text-4xl font-extrabold leading-tight md:text-6xl">
        The Official Token of Etheria
        <br/>
        <span class="bg-gradient-to-r from-[var(--ether-orange)] to-[var(--ether-blue)] bg-clip-text text-transparent">
          $ETRX Presale
        </span>
      </h1>
      <p class="mt-4 max-w-prose" style="color:var(--text-muted)">
        Powering realms, artifacts, governance and community rewards. Built on Ethereum for permanence and reach.
      </p>

      <!-- Countdown -->
      <div class="mt-8">
        <div id="phaseLabel" class="mb-2 text-xs uppercase tracking-widest" style="color:var(--text-dim)">Presale begins in</div>
        <div class="flex gap-3 text-center" id="countdown" aria-live="polite"></div>

        <div class="mt-2 flex flex-wrap items-center gap-3 text-xs" style="color:var(--text-dim)">
          <span id="whenText"></span>
          <button id="tzToggle" class="underline underline-offset-4 opacity-90 hover:opacity-100">Show times in UTC</button>
        </div>

        <!-- Progress / What's next -->
        <div class="mt-4 rounded-2xl panel ring-panel p-4">
          <div class="flex items-center justify-between text-xs" style="color:var(--text-dim)">
            <span>Phase: Presale</span><span id="phaseEta"></span>
          </div>
          <div class="mt-2 h-2 w-full overflow-hidden rounded-full bg-white/10">
            <div id="phaseBar" class="h-full bg-gradient-to-r from-[var(--ether-orange)] to-[var(--ether-blue)]" style="width:0%"></div>
          </div>
          <ul class="mt-3 grid grid-cols-3 gap-2 text-[11px]" style="color:var(--text-dim)">
            <li>ðŸ“¬ Whitelist</li><li>ðŸ•’ Presale (now)</li><li>ðŸš€ TGE & Listing</li>
          </ul>
        </div>

        <noscript>
          <p class="mt-2 text-xs" style="color:var(--text-dim)">Presale: Oct 31 â†’ Nov 7, 2025 (UTC). TGE/listing follows after presale.</p>
        </noscript>
      </div>

      <!-- Stats -->
      <ul class="mt-8 grid grid-cols-2 gap-3 text-sm sm:text-base">
        <li class="rounded-2xl panel p-4 ring-panel">Supply: <b>10,000,000</b></li>
        <li class="rounded-2xl panel p-4 ring-panel">Network: <b>Ethereum</b></li>
        <li class="rounded-2xl panel p-4 ring-panel">Symbol: <b>ETRX</b></li>
        <li class="rounded-2xl panel p-4 ring-panel">Presale: <b>Oct 31 â†’ Nov 7</b></li>
      </ul>

      <!-- What happens after -->
      <div class="mt-4 text-xs" style="color:var(--text-dim)">
        <b>What happens next?</b> After the presale window closes, we proceed to Token Generation Event (TGE), distribution to participants,
        and initial listings/liquidity. Exact TGE timing will be announced on our socials.
      </div>

      <!-- Socials row -->
      <div class="mt-6 flex flex-wrap items-center gap-3 text-sm" style="color:var(--text-dim)">
        <span>Follow updates:</span>
        <a href="https://twitter.com/enteretheria" target="_blank" rel="noopener noreferrer" class="hover:text-white">Twitter</a> Â·
        <a href="#" target="_blank" rel="noopener noreferrer" class="hover:text-white">Telegram</a> Â·
        <a href="#" target="_blank" rel="noopener noreferrer" class="hover:text-white">Mirror</a>
      </div>

      <!-- Share & connect teaser -->
      <div class="mt-4 flex flex-wrap items-center gap-3">
        <button id="shareLaunch" class="rounded-2xl border border-white/15 bg-white/5 px-4 py-2 text-sm hover:bg-white/10">
          Share this launch
        </button>
        <button disabled class="inline-flex items-center gap-2 rounded-2xl border border-white/15 bg-white/5 px-4 py-2 text-sm opacity-60 cursor-not-allowed">
          <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 7a2 2 0 0 1 2-2h12a4 4 0 0 1 4 4v1h-3.5a2.5 2.5 0 1 0 0 5H21v1a4 4 0 0 1-4 4H5a2 2 0 0 1-2-2zM21 12h-3.5a1.5 1.5 0 0 0 0 3H21z"/></svg>
          Connect Wallet (coming soon)
        </button>
      </div>
    </div>

    <!-- Hero image column â€” responsive -->
    <div class="order-1 md:order-2 h-[360px] md:h-[560px] lg:h-[620px]">
      <img
        src="assets/Background.png?v=6"
        srcset="assets/Background-640.jpg 640w, assets/Background-960.jpg 960w, assets/Background-1280.jpg 1280w, assets/Background.png?v=6 1600w"
        sizes="(max-width: 768px) 100vw, 50vw"
        alt="Etheria Background"
        width="1280" height="720"
        fetchpriority="high"
        class="h-full w-full rounded-3xl ring-1 ring-white/10 object-cover"
        loading="eager" decoding="async"
        onerror="this.outerHTML='<div class=&quot;h-full w-full rounded-3xl ring-1 ring-white/10 bg-gradient-to-br from-cyan-500/10 via-blue-500/10 to-orange-500/10 flex items-center justify-center text-white/50&quot;>Background image missing</div>'"
      />
    </div>
  </section>

  <!-- About -->
  <section id="about" class="z-10 mx-auto max-w-6xl px-6 py-16">
    <h2 class="text-2xl font-bold">What is $ETRX?</h2>
    <p class="mt-3 max-w-3xl" style="color:var(--text-muted)">
      $ETRX is the utility token of Etheria â€” used to unlock rare Realms &amp; Artifacts, vote on lore and direction,
      access exclusive drops, and power the Etherian economy. Holders may receive airdrops and in-world benefits as
      the universe expands.
    </p>
  </section>

  <!-- Tokenomics (No percentages) -->
  <section id="token" class="z-10 mx-auto max-w-6xl px-6">
    <h2 class="text-2xl font-bold">Tokenomics (Overview)</h2>
    <div class="mt-5 grid grid-cols-1 gap-4 md:grid-cols-3">
      <div class="rounded-2xl panel p-5 ring-panel"><b>Utility</b><br/><span style="color:var(--text-dim)">Access to Etherian Realms &amp; Artifacts, governance votes, allowlists, and in-world boosts.</span></div>
      <div class="rounded-2xl panel p-5 ring-panel"><b>Distribution Model</b><br/><span style="color:var(--text-dim)">Phased: presale participants, ecosystem growth, contributors, liquidity, and long-term reserves.</span></div>
      <div class="rounded-2xl panel p-5 ring-panel"><b>Lockups &amp; Cliff</b><br/><span style="color:var(--text-dim)">Contributor and reserve tranches unlock gradually to align long-term incentives.</span></div>
      <div class="rounded-2xl panel p-5 ring-panel"><b>Emissions</b><br/><span style="color:var(--text-dim)">No hard farming emissions at launch; rewards focus on community quests and on-chain participation.</span></div>
      <div class="rounded-2xl panel p-5 ring-panel"><b>Liquidity Approach</b><br/><span style="color:var(--text-dim)">Initial pools post-TGE with transparent on-chain adds; bridge exploration comes later.</span></div>
      <div class="rounded-2xl panel p-5 ring-panel"><b>Governance</b><br/><span style="color:var(--text-dim)">Progressive decentralization â€” votes start with lore/world decisions and expand with the universe.</span></div>
    </div>
    <p class="mt-3 text-xs" style="color:var(--text-dim)">Note: Detailed allocations/percentages will be shared closer to TGE.</p>
  </section>

  <!-- Road -->
  <section id="road" class="z-10 mx-auto max-w-6xl px-6 py-16">
    <h2 class="text-2xl font-bold">Road to Mainnet</h2>
    <ol class="mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2" style="color:var(--text-muted)">
      <li class="rounded-2xl panel ring-panel p-4 transition-transform hover:-translate-y-0.5">1) Launch site &amp; whitelist open</li>
      <li class="rounded-2xl panel ring-panel p-4 transition-transform hover:-translate-y-0.5">2) Community reveal + partnerships</li>
      <li class="rounded-2xl panel ring-panel p-4 transition-transform hover:-translate-y-0.5">3) Presale window opens (this page)</li>
      <li class="rounded-2xl panel ring-panel p-4 transition-transform hover:-translate-y-0.5">4) TGE: distribution to presale wallets</li>
      <li class="rounded-2xl panel ring-panel p-4 transition-transform hover:-translate-y-0.5 sm:col-span-2">5) Initial listings + liquidity + bridge planning</li>
    </ol>
  </section>

  <!-- Notify & Allowlist -->
  <section id="notify" class="z-10 mx-auto max-w-6xl px-6 pb-20">
    <div class="rounded-3xl panel p-6 card">
      <h3 class="text-xl font-semibold">Get notified when the presale opens</h3>
      <form id="notifyForm" class="mt-4 flex flex-col gap-3 sm:flex-row" action="https://formspree.io/f/your-id" method="POST">
        <label class="sr-only" for="email">Email</label>
        <input required id="email" name="email" type="email" placeholder="you@example.com"
               class="flex-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 outline-none placeholder:text-white/40 focus:ring-2 focus:ring-[var(--ether-blue)]"/>
        <input type="hidden" name="_redirect" value="https://etheriaetrx-etrx.github.io/etrx-presale/#notify-success">
        <button class="btn-primary rounded-2xl px-5 py-3" type="submit">Notify Me</button>
      </form>
      <p id="notifyMsg" class="mt-2 text-xs hidden" style="color:var(--text-dim)">Thanks! Weâ€™ll email you about $ETRX timing.</p>
      <p class="mt-1 text-xs" style="color:var(--text-dim)">We only use your info for presale notifications. No spam.</p>

      <!-- Wallet allowlist form -->
      <form id="wlForm" class="mt-6 grid gap-3 sm:grid-cols-[1fr_auto]">
        <label class="sr-only" for="wallet">Ethereum wallet</label>
        <input id="wallet" name="wallet" inputmode="text" autocomplete="off"
               placeholder="0xâ€¦ your Ethereum address"
               class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3 outline-none placeholder:text-white/40 focus:ring-2 focus:ring-[var(--ether-blue)]" />
        <!-- Honeypot -->
        <input type="text" name="company" class="hidden" tabindex="-1" autocomplete="off" />
        <button class="btn-primary rounded-2xl px-5 py-3" type="submit">Join Allowlist</button>
        <p id="wlMsg" class="sm:col-span-2 text-xs hidden" style="color:var(--text-dim)"></p>
      </form>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="z-10 mx-auto max-w-6xl px-6 pb-24">
    <h2 class="text-2xl font-bold">FAQ</h2>
    <div class="mt-5 grid grid-cols-1 gap-4 md:grid-cols-2">
      <div class="rounded-2xl panel ring-panel">
        <button class="w-full flex items-center justify-between p-5 text-left">
          <b>Is this a presale or the live coin?</b><span aria-hidden="true">+</span>
        </button>
        <div class="px-5 pb-5 hidden" style="color:var(--text-dim)">
          This page is for the <b>presale window</b> (Oct 31 â†’ Nov 7, 2025 UTC). After presale, we proceed to <b>TGE</b> and <b>initial listings/liquidity</b>.
        </div>
      </div>
      <div class="rounded-2xl panel ring-panel">
        <button class="w-full flex items-center justify-between p-5 text-left">
          <b>How will buying work?</b><span aria-hidden="true">+</span>
        </button>
        <div class="px-5 pb-5 hidden" style="color:var(--text-dim)">
          When live, youâ€™ll connect MetaMask and participate directly in the presale contract. Post-TGE, $ETRX will appear in your wallet and on supported venues.
        </div>
      </div>
      <div class="rounded-2xl panel ring-panel">
        <button class="w-full flex items-center justify-between p-5 text-left">
          <b>Do I need ETH now?</b><span aria-hidden="true">+</span>
        </button>
        <div class="px-5 pb-5 hidden" style="color:var(--text-dim)">
          Not yet. This site is for announcements and whitelisting until contracts are deployed.
        </div>
      </div>
      <div class="rounded-2xl panel ring-panel">
        <button class="w-full flex items-center justify-between p-5 text-left">
          <b>What chains are supported?</b><span aria-hidden="true">+</span>
        </button>
        <div class="px-5 pb-5 hidden" style="color:var(--text-dim)">
          Launching on Ethereum. Future bridge support is planned.
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="z-10 border-t border-white/10 py-10">
    <div class="mx-auto flex max-w-6xl flex-col items-center justify-between gap-3 px-6 text-sm" style="color:var(--text-dim)">
      <div>Â© <span id="year"></span> Etheria â€¢ $ETRX</div>
      <div class="flex items-center gap-4">
        <a href="https://twitter.com/enteretheria" target="_blank" rel="noopener noreferrer" class="hover:text-white">Twitter</a>
        <a href="#" target="_blank" rel="noopener noreferrer" class="hover:text-white">Telegram</a>
        <a href="#" target="_blank" rel="noopener noreferrer" class="hover:text-white">Mirror</a>
        <a href="#" target="_blank" rel="noopener noreferrer" class="hover:text-white">OpenSea</a>
      </div>
    </div>
  </footer>

  <!-- Sticky Launch Bar (shows in last 14 days) -->
  <div id="launchBar" class="hidden mx-auto max-w-6xl m-3 rounded-2xl panel ring-panel p-4 flex items-center justify-between">
    <span class="text-sm" style="color:var(--text-muted)"><b>$ETRX</b> presale starts soon. Donâ€™t miss it.</span>
    <a href="#notify" class="btn-primary rounded-2xl px-4 py-2 text-sm">Get Notified</a>
  </div>

  <script>
    // ==== FIXED PRESALE WINDOW (UTC) ====
    const PRESALE_START = new Date('2025-10-31T00:00:00Z');
    const PRESALE_END   = new Date('2025-11-07T00:00:00Z');

    const $ = (id)=> document.getElementById(id);
    const phaseLabel = $('phaseLabel');
    const countdown  = $('countdown');
    const whenText   = $('whenText');
    $('year').textContent = new Date().getFullYear();

    // --- Time formatting & UTC toggle ---
    let showUTC=false;
    const tzBtn = $('tzToggle');
    const fmtUTC = (d)=> d.toUTCString().replace(' GMT',' UTC');
    const fmtLoc = (d)=> d.toLocaleString([], {year:'numeric',month:'short',day:'2-digit',hour:'2-digit',minute:'2-digit',hour12:true});
    const fmt = (d)=> showUTC ? fmtUTC(d) : fmtLoc(d);
    function updateWhen(){
      whenText.textContent = `Presale: ${fmt(PRESALE_START)} â†’ ${fmt(PRESALE_END)} â€¢ TGE/listing follow after presale`;
    }
    tzBtn.addEventListener('click', ()=>{
      showUTC=!showUTC;
      tzBtn.textContent = showUTC ? 'Show times in Local' : 'Show times in UTC';
      updateWhen();
    });

    // --- High-precision clock to avoid drift ---
    const t0 = Date.now();
    const p0 = performance.now();
    const nowAccurate = ()=> new Date(t0 + (performance.now()-p0));

    // --- Phase & countdown rendering ---
    function phase(now){ if(now<PRESALE_START) return 'upcoming'; if(now>PRESALE_END) return 'ended'; return 'live'; }
    function box(v,label){
      const d=document.createElement('div');
      d.className='w-20 rounded-2xl panel p-3 ring-panel';
      d.innerHTML=`<div class="text-3xl font-bold tabular">${String(v).padStart(2,'0')}</div>
                   <div class="text-xs uppercase" style="color:var(--text-dim)">${label}</div>`;
      return d;
    }

    let lastSecond = -1;
    function loop(){
      const now = nowAccurate();
      const ph=phase(now);
      if (phaseLabel) { phaseLabel.textContent = ph==='upcoming'?'Presale begins in':ph==='live'?'Presale ends in':'Presale ended'; }

      const target = ph==='upcoming'?PRESALE_START:ph==='live'?PRESALE_END:now;
      const diff = Math.max(0, target-now);
      const s=Math.floor(diff/1000);

      // Only touch the DOM when the visible value changes
      if(s !== lastSecond){
        lastSecond = s;
        const d=Math.floor(s/86400), h=Math.floor((s%86400)/3600), m=Math.floor((s%3600)/60), ss=s%60;
        countdown.replaceChildren(box(d,'d'),box(h,'h'),box(m,'m'),box(ss,'s'));
      }
      requestAnimationFrame(loop);
    }

    updateWhen();
    loop();

    // Presale progress bar (0â€“100% between start and end)
    const phaseBar = $('phaseBar');
    const phaseEta = $('phaseEta');
    function updateProgress(){
      const now = new Date();
      let pct = 0;
      if (now <= PRESALE_START) pct = 0;
      else if (now >= PRESALE_END) pct = 100;
      else pct = ((now - PRESALE_START) / (PRESALE_END - PRESALE_START)) * 100;

      if (phaseBar) phaseBar.style.width = `${pct}%`;
      const endIn = Math.max(0, PRESALE_END - now);
      const hrs = Math.floor(endIn/36e5), mins = Math.floor((endIn%36e5)/6e4);
      if (phaseEta) phaseEta.textContent = (endIn===0) ? 'Ended' : `Ends in ${hrs}h ${String(mins).padStart(2,'0')}m`;
    }
    updateProgress(); setInterval(updateProgress, 30_000);

    // Sticky launch bar (show within last 14 days before start)
    const SHOW_BAR_DAYS = 14;
    function toggleBar(){
      const days=(PRESALE_START - new Date())/86400000;
      $('launchBar').classList.toggle('hidden', !(days>0 && days<=SHOW_BAR_DAYS));
    }
    toggleBar(); setInterval(toggleBar, 60_000);

    // Smooth scroll + active nav highlight
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const id=a.getAttribute('href').slice(1);
        const el=document.getElementById(id);
        if(!el) return;
        e.preventDefault();
        el.scrollIntoView({behavior:'smooth', block:'start'});
        history.replaceState(null,'','#'+id);
      });
    });
    const sections=[...document.querySelectorAll('section[id]')];
    const navLinks=[...document.querySelectorAll('header nav a[href^="#"]')];
    const map=new Map(navLinks.map(l=>[l.getAttribute('href').slice(1),l]));
    const io=new IntersectionObserver((ents)=>{
      ents.forEach(ent=>{
        if(ent.isIntersecting){
          const id=ent.target.id;
          navLinks.forEach(l=>l.classList.remove('text-white','opacity-100'));
          const link=map.get(id); if(link) link.classList.add('text-white','opacity-100');
        }
      });
    }, {rootMargin:'-30% 0px -60% 0px', threshold:0.01});
    sections.forEach(s=>io.observe(s));

    // FAQ collapsible
    document.querySelectorAll('#faq .panel > button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const ans=btn.nextElementSibling;
        ans.classList.toggle('hidden');
        btn.querySelector('span').textContent = ans.classList.contains('hidden') ? '+' : 'â€“';
      });
    });

    // Notify success message
    if(location.hash==='#notify-success'){
      const msg=$('notifyMsg'); if(msg) msg.classList.remove('hidden');
    }

    // Wallet allowlist submission
    const wlForm = document.getElementById('wlForm');
    if (wlForm){
      wlForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const fd = new FormData(wlForm);
        const addr = (fd.get('wallet')||'').trim();
        const trap = (fd.get('company')||'').trim();
        const msg = document.getElementById('wlMsg');
        const isHexAddr = /^0x[a-fA-F0-9]{40}$/.test(addr);
        if (trap) return; // honeypot tripped
        if (!isHexAddr){
          msg.textContent = 'Enter a valid Ethereum address (0xâ€¦40 hex chars).';
          msg.classList.remove('hidden'); return;
        }
        const list = JSON.parse(localStorage.getItem('etrx_wl')||'[]');
        if (!list.includes(addr)) list.push(addr);
        localStorage.setItem('etrx_wl', JSON.stringify(list));

        // Optional: forward to Formspree JSON endpoint (replace form ID)
        try{
          await fetch('https://formspree.io/f/your-id', {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ wallet: addr, type: 'allowlist' })
          });
          msg.textContent = 'Wallet submitted! Weâ€™ll verify allowlist details before presale.';
        }catch{
          msg.textContent = 'Saved locally. Network submit failed â€” weâ€™ll try again later.';
        }
        msg.classList.remove('hidden');
        wlForm.reset();
      });
    }

    // Share button
    const shareBtn = document.getElementById('shareLaunch');
    if (shareBtn && navigator.share){
      shareBtn.addEventListener('click', async ()=>{
        try{
          await navigator.share({
            title: '$ETRX â€¢ Etheria Presale',
            text: 'Presale runs Oct 31 â†’ Nov 7 (UTC). Join the allowlist.',
            url: location.href
          });
        }catch{}
      });
    }else if(shareBtn){
      shareBtn.addEventListener('click', ()=>{
        navigator.clipboard.writeText(location.href);
        shareBtn.textContent = 'Link copied!';
        setTimeout(()=>shareBtn.textContent='Share this launch', 1500);
      });
    }

    // Register service worker (for assets only; HTML stays fresh)
    if ('serviceWorker' in navigator){
      navigator.serviceWorker.register('./sw.js');
    }

    // ==== FLOATING ORBS / STARFIELD ====
    (function(){
      const canvas=$('orbCanvas'), ctx=canvas.getContext('2d');
      if (matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      let w,h,dpr,stars=[],running=true;
      function resize(){ dpr=Math.min(devicePixelRatio||1,2); w=canvas.width=Math.floor(innerWidth*dpr); h=canvas.height=Math.floor(innerHeight*dpr); canvas.style.width=innerWidth+'px'; canvas.style.height=innerHeight+'px'; init(); }
      function rand(a,b){ return a+Math.random()*(b-a) }
      function makeStar(depth=1){
        const r=rand(.6,1.8)*(4-depth)*dpr*.4, speed=rand(.03,.12)*(4-depth)*dpr, x=rand(0,w), y=rand(0,h);
        const hue=Math.random()<.55?205:24, sat=95, light=hue===205?70:62, alphaBase=rand(.35,.75), twinkleAmp=rand(.2,.6), twinkleSpd=rand(.002,.006), dir=Math.random()<.5?-1:1;
        return {x,y,r,speed,depth,hue,sat,light,alphaBase,twinkleAmp,twinkleSpd,dir,t:rand(0,Math.PI*2)};
      }
      function init(){
        const baseDensity = (innerWidth*innerHeight)/18000;
        const cores = (navigator.hardwareConcurrency||4);
        const density = Math.round(baseDensity * Math.min(1, cores/8)); // lower on low-spec
        stars=[]; for(let i=0;i<density;i++) stars.push(makeStar(i%3+1));
      }
      function draw(s){
        s.t+=s.twinkleSpd; const a=s.alphaBase+Math.sin(s.t)*s.twinkleAmp*.25;
        const g=ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r*4);
        g.addColorStop(0,`hsla(${s.hue} ${s.sat}% ${s.light}% / ${a})`);
        g.addColorStop(1,`hsla(${s.hue} ${s.sat}% 10% / 0)`);
        ctx.fillStyle=g; ctx.beginPath(); ctx.arc(s.x,s.y,s.r*4,0,Math.PI*2); ctx.fill();
        ctx.fillStyle=`hsla(${s.hue} ${s.sat}% ${s.light+10}% / ${a+.05})`; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
      }
      function step(){
        if(!running) return;
        ctx.clearRect(0,0,w,h);
        for(const s of stars){
          s.y+=s.speed*s.dir; s.x+=Math.sin((s.y+s.depth*50)*.001)*.2*(4-s.depth);
          if(s.y<-10) s.y=h+10; if(s.y>h+10) s.y=-10; if(s.x<-10) s.x=w+10; if(s.x>w+10) s.x=-10;
          draw(s);
        }
        requestAnimationFrame(step);
      }
      resize(); step(); addEventListener('resize',resize,{passive:true}); addEventListener('visibilitychange',()=>{running=document.visibilityState==='visible'; if(running) requestAnimationFrame(step);});
    })();
  </script>
</body>
</html>
